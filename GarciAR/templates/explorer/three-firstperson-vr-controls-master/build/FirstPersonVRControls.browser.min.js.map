{"version":3,"sources":["webpack://THREE.FirstPersonVRControls/webpack/bootstrap","webpack://THREE.FirstPersonVRControls/external \"THREE\"","webpack://THREE.FirstPersonVRControls/./FirstPersonVRControls.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","THREE","ZAXIS","Vector3","YAXIS","FirstPersonVRControls","camera","scene","rig","_this","this","_classCallCheck","enabled","verticalMovement","strafing","boost","movementSpeed","snapAngle","Math","PI","boostFactor","_angleQuaternion","Quaternion","_moveForward","_moveBackward","_moveLeft","_moveRight","_moveUp","_moveDown","_boosting","_onKeyDown","event","repeat","key","toLowerCase","snap","_onKeyUp","_angle","_tempMatrix","Matrix4","_direction","_tempObject","Object3D","_camera","add","window","addEventListener","direction","deltaAngle","setFromAxisAngle","makeTranslation","position","x","y","z","matrix","multiply","makeRotationY","decompose","quaternion","scale","set","applyQuaternion","normalize","setFromUnitVectors","delta","copy","multiplyQuaternions","_collapseYComponent","actualMoveSpeed","translateZ","translateX","translateY","removeEventListener"],"mappings":"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","file":"./FirstPersonVRControls.browser.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = THREE;","/**\n * @author brianpeiris / http://brian.peiris.io/\n *\n * Based on code from THREE.FirstPersonControls\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author paulirish / http://paulirish.com/\n */\nimport * as THREE from 'three';\n\nconst ZAXIS = new THREE.Vector3(0, 0, 1);\nconst YAXIS = new THREE.Vector3(0, 1, 0);\n\nexport default class FirstPersonVRControls {\n  enabled = true;\n  verticalMovement = false;\n  strafing = false;\n  boost = true;\n  movementSpeed = 1.0;\n  snapAngle = 22.5 * Math.PI / 180;\n  boostFactor = 2;\n\n  _angleQuaternion = new THREE.Quaternion();\n\n  _moveForward = false;\n  _moveBackward = false;\n  _moveLeft = false;\n  _moveRight = false;\n  _moveUp = false;\n  _moveDown = false;\n  _boosting = false;\n\n  constructor (camera, scene, rig) {\n    this._camera = camera;\n    if (!rig) {\n      this.rig = new THREE.Object3D();\n      this.rig.add(camera);\n      scene.add(this.rig);\n    } else {\n      this.rig = rig;\n    }\n  \n    window.addEventListener('keydown', this._onKeyDown, false);\n    window.addEventListener('keyup', this._onKeyUp, false);\n  }\n\n  _onKeyDown = (event) => {\n    if (event.repeat) { return; }\n\n    switch (event.key.toLowerCase()) {\n      case 'arrowup': \n      case 'w': this._moveForward = true; break;\n\n      case 'arrowleft': \n      case 'a': this._moveLeft = true; break;\n\n      case 'arrowdown': \n      case 's': this._moveBackward = true; break;\n\n      case 'arrowright':\n      case 'd': this._moveRight = true; break;\n\n      case 'r': this._moveUp = true; break;\n      case 'f': this._moveDown = true; break;\n\n      case 'shift': this._boosting = true; break;\n\n      case 'q': this.snap('left'); break;\n      case 'e': this.snap('right'); break;\n    }\n  };\n\n  _onKeyUp = (event) => {\n    switch (event.key.toLowerCase()) {\n      case 'arrowup': \n      case 'w': this._moveForward = false; break;\n\n      case 'arrowleft': \n      case 'a': this._moveLeft = false; break;\n\n      case 'arrowdown': \n      case 's': this._moveBackward = false; break;\n\n      case 'arrowright':\n      case 'd': this._moveRight = false; break;\n\n      case 'r': this._moveUp = false; break;\n      case 'f': this._moveDown = false; break;\n\n      case 'shift': this._boosting = false; break;\n    }\n  };\n\n  _angle = 0;\n  _tempMatrix = new THREE.Matrix4()\n  snap (direction) {\n    const deltaAngle = this.snapAngle * (direction === 'left' ? 1 : -1);\n    this._angle += deltaAngle;\n    this._angleQuaternion.setFromAxisAngle(YAXIS, this._angle);\n\n    this._tempMatrix.makeTranslation(this._camera.position.x, this._camera.position.y, this._camera.position.z);\n    this.rig.matrix.multiply(this._tempMatrix);\n\n    this._tempMatrix.makeRotationY(-deltaAngle);\n    this.rig.matrix.multiply(this._tempMatrix);\n\n    this._tempMatrix.makeRotationY(deltaAngle * 2);\n    this.rig.matrix.multiply(this._tempMatrix);\n\n    this._tempMatrix.makeTranslation(-this._camera.position.x, -this._camera.position.y, -this._camera.position.z);\n    this.rig.matrix.multiply(this._tempMatrix);\n\n    this.rig.matrix.decompose(this.rig.position, this.rig.quaternion, this.rig.scale);\n  }\n\n  _direction = new THREE.Vector3();\n  _collapseYComponent (quaternion) {\n    this._direction.set(0, 0, 1);\n    this._direction.applyQuaternion(quaternion);\n    this._direction.y = 0;\n    this._direction.normalize();\n    quaternion.setFromUnitVectors(ZAXIS, this._direction);\n  }\n\n  _tempObject = new THREE.Object3D();\n  update (delta) {\n    if (!this.enabled) return;\n\n    this._tempObject.position.set(0, 0, 0);\n    this._tempObject.quaternion.copy(this._camera.quaternion);\n    this._tempObject.quaternion.multiplyQuaternions(this._angleQuaternion, this._camera.quaternion);    \n    this._collapseYComponent(this._tempObject.quaternion);\n    \n    let actualMoveSpeed = delta * this.movementSpeed;\n    if (this.boost && this._boosting) actualMoveSpeed = actualMoveSpeed * this.boostFactor;\n    \n    if (this._moveForward) this._tempObject.translateZ(- actualMoveSpeed);\n    if (this._moveBackward) this._tempObject.translateZ(actualMoveSpeed);\n\n    if (this.strafing && this._moveLeft) this._tempObject.translateX(- actualMoveSpeed);\n    if (this.strafing && this._moveRight) this._tempObject.translateX(actualMoveSpeed);\n\n    if (this.verticalMovement && this._moveUp) this._tempObject.translateY(actualMoveSpeed);\n    if (this.verticalMovement && this._moveDown) this._tempObject.translateY(- actualMoveSpeed);\n\n    this.rig.position.add(this._tempObject.position);\n  }\n\n  dispose () {\n    window.removeEventListener('keydown', this._onKeyDown, false);\n    window.removeEventListener('keyup', this._onKeyUp, false);\n  }\n}\n"],"sourceRoot":""}