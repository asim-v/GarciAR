!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("three")):"function"==typeof define&&define.amd?define(["three"],e):"object"==typeof exports?exports.FirstPersonVRControls=e(require("three")):t.FirstPersonVRControls=e(t.three)}(window,function(t){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(e,i){e.exports=t},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(0));var n=new r.Vector3(0,0,1),a=new r.Vector3(0,1,0),s=function(){function t(e,i,o){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.enabled=!0,this.verticalMovement=!1,this.strafing=!1,this.boost=!0,this.movementSpeed=1,this.snapAngle=22.5*Math.PI/180,this.boostFactor=2,this._angleQuaternion=new r.Quaternion,this._moveForward=!1,this._moveBackward=!1,this._moveLeft=!1,this._moveRight=!1,this._moveUp=!1,this._moveDown=!1,this._boosting=!1,this._onKeyDown=function(t){if(!t.repeat)switch(t.key.toLowerCase()){case"arrowup":case"w":n._moveForward=!0;break;case"arrowleft":case"a":n._moveLeft=!0;break;case"arrowdown":case"s":n._moveBackward=!0;break;case"arrowright":case"d":n._moveRight=!0;break;case"r":n._moveUp=!0;break;case"f":n._moveDown=!0;break;case"shift":n._boosting=!0;break;case"q":n.snap("left");break;case"e":n.snap("right")}},this._onKeyUp=function(t){switch(t.key.toLowerCase()){case"arrowup":case"w":n._moveForward=!1;break;case"arrowleft":case"a":n._moveLeft=!1;break;case"arrowdown":case"s":n._moveBackward=!1;break;case"arrowright":case"d":n._moveRight=!1;break;case"r":n._moveUp=!1;break;case"f":n._moveDown=!1;break;case"shift":n._boosting=!1}},this._angle=0,this._tempMatrix=new r.Matrix4,this._direction=new r.Vector3,this._tempObject=new r.Object3D,this._camera=e,o?this.rig=o:(this.rig=new r.Object3D,this.rig.add(e),i.add(this.rig)),window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1)}return o(t,[{key:"snap",value:function(t){var e=this.snapAngle*("left"===t?1:-1);this._angle+=e,this._angleQuaternion.setFromAxisAngle(a,this._angle),this._tempMatrix.makeTranslation(this._camera.position.x,this._camera.position.y,this._camera.position.z),this.rig.matrix.multiply(this._tempMatrix),this._tempMatrix.makeRotationY(-e),this.rig.matrix.multiply(this._tempMatrix),this._tempMatrix.makeRotationY(2*e),this.rig.matrix.multiply(this._tempMatrix),this._tempMatrix.makeTranslation(-this._camera.position.x,-this._camera.position.y,-this._camera.position.z),this.rig.matrix.multiply(this._tempMatrix),this.rig.matrix.decompose(this.rig.position,this.rig.quaternion,this.rig.scale)}},{key:"_collapseYComponent",value:function(t){this._direction.set(0,0,1),this._direction.applyQuaternion(t),this._direction.y=0,this._direction.normalize(),t.setFromUnitVectors(n,this._direction)}},{key:"update",value:function(t){if(this.enabled){this._tempObject.position.set(0,0,0),this._tempObject.quaternion.copy(this._camera.quaternion),this._tempObject.quaternion.multiplyQuaternions(this._angleQuaternion,this._camera.quaternion),this._collapseYComponent(this._tempObject.quaternion);var e=t*this.movementSpeed;this.boost&&this._boosting&&(e*=this.boostFactor),this._moveForward&&this._tempObject.translateZ(-e),this._moveBackward&&this._tempObject.translateZ(e),this.strafing&&this._moveLeft&&this._tempObject.translateX(-e),this.strafing&&this._moveRight&&this._tempObject.translateX(e),this.verticalMovement&&this._moveUp&&this._tempObject.translateY(e),this.verticalMovement&&this._moveDown&&this._tempObject.translateY(-e),this.rig.position.add(this._tempObject.position)}}},{key:"dispose",value:function(){window.removeEventListener("keydown",this._onKeyDown,!1),window.removeEventListener("keyup",this._onKeyUp,!1)}}]),t}();e.default=s}]).default});
//# sourceMappingURL=FirstPersonVRControls.umd.min.js.map